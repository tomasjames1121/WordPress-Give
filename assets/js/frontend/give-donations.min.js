var give_scripts,give_global_vars,Give="undefined"!=typeof Give?Give:{};Give={fn:{formatCurrency:function(e,t,i){var n={symbol:"",decimal:parseInt(give_global_vars.decimal_separator),thousand:give_global_vars.thousands_separator,precision:give_global_vars.number_decimals,currency:give_global_vars.currency};if(e=e.toString().trim(),i="undefined"==typeof i?{}:i,i.length&&(n={symbol:"",decimal:Give.form.fn.getInfo("decimal_separator",i),thousand:Give.form.fn.getInfo("thousands_separator",i),precision:Give.form.fn.getInfo("number_decimals",i),currency:Give.form.fn.getInfo("currency_code",i)}),t=jQuery.extend(n,t),t.precision=parseInt(t.precision),"INR"===t.currency){var a,r,o=accounting.unformat(e,t.decimal).toString(),d="",s=o.indexOf(".");for(-1!==s&&t.precision&&(d=Number(o.substr(parseInt(s))).toFixed(t.precision).toString().substr(1),o=o.substr(0,parseInt(s)),d.length?t.precision+1>d.length&&(d=(d+"000000000").substr(0,t.precision+1)):d=".0000000000".substr(0,parseInt(s)+1)),a=o.substr(-3),r=o.substr(0,parseInt(o.length)-3);r.length>0;)a=r.substr(-2)+t.thousand+a,r=r.substr(0,parseInt(r.length)-2);d.length&&(a+=d),e=a,void 0!==t.symbol&&t.symbol.length&&("after"===t.position?e+=t.symbol:e=t.symbol+e)}else"after"===t.position&&(t.format="%v%s"),e=accounting.formatMoney(e,t);return e},unFormatCurrency:function(e,t){return Math.abs(parseFloat(accounting.unformat(e,t)))},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getGlobalVar:function(e){return"undefined"===give_global_vars[e]?"":give_global_vars[e]}}},Give.form={init:function(){this.fn.field.formatCreditCard(jQuery("form.give-form")),this.fn.__sendBackToForm()},fn:{disable:function(e,t){return!!e.length&&void e.find(".give-submit").prop("disabled",t)},formatAmount:function(e,t,i){return t.length?Give.fn.formatCurrency(e,i,t):e},getInfo:function(e,t){var i="";if(t="undefined"!=typeof t?t:{},!e.length||!t.length)return i;switch(e){case"gateways":i=[],jQuery.each(t.find('input[name="payment-mode"]'),function(e,t){t=t instanceof jQuery?t:jQuery(t),i.push(t.val().trim())});break;case"form-type":t.hasClass("give-form-type-set")?i="set":t.hasClass("give-form-type-multi")&&(i="multi");break;default:i=t.get(0).hasAttribute("data-"+e)?t.attr("data-"+e):t.attr(e),"undefined"!=typeof i?i.trim():i}return i},setInfo:function(e,t,i,n){if(!e.length||!i.length)return!1;switch(n="undefined"==typeof n?"data":n){case"attr":i.attr(e,t);break;default:i.data(e,t)}return!0},getGateway:function(e){var t="";return e.length?(t=e.find('input[name="payment-mode"]:checked').val().trim(),"undefined"!==t?t:""):t},getVariablePrices:function(e){var t,i=[];return e.length&&e.hasClass("give-form-type-multi")&&(t=e.find(".give-donation-levels-wrap [data-price-id] "))?(jQuery.each(t,function(t,n){n=n instanceof jQuery?n:jQuery(n);var a=Give.form.fn.getInfo("decimal_separator",e);i.push({price_id:n.data("price-id"),amount:Give.fn.unFormatCurrency(n.val(),a)})}),i):i},getPriceID:function(e){var t=this.getVariablePrices(e),i=Give.fn.unFormatCurrency(e.find('input[name="give-amount"]').val(),this.getInfo("decimal_separator",e)),n=-1;return t.length&&(jQuery.each(t,function(e,t){if(t.amount===i)return n=t.price_id,!1}),-1===n&&this.getMinimumAmount(e)<=i&&(n="custom")),n},getMinimumAmount:function(e){return Give.fn.unFormatCurrency(e.find('input[name="give-form-minimum"]').val())},getAmount:function(e){if(!e.length)return null;var t=e.find('input[name="give-amount"]').val();return"undefined"!==t&&t||(t=0),Give.fn.unFormatCurrency(t,this.getInfo("decimal_separator",e))},autoSelectDonationLevel:function(e){if(!e.length||"multi"!==this.getInfo("form-type",e))return!1;var t=this.getPriceID(e);switch(!0){case!!e.find(".give-radio-input").length:e.find(".give-radio-input").prop("checked",!1),e.find('.give-radio-input[data-price-id="'+t+'"]').prop("checked",!0).addClass("give-default-level");break;case!!e.find("button.give-donation-level-btn").length:e.find("button.give-donation-level-btn").blur(),e.find('button.give-donation-level-btn[data-price-id="'+t+'"]').focus().addClass("give-default-level");break;case!!e.find("select.give-select-level").length:e.find("select.give-select-level option").prop("selected",!1),e.find('select.give-select-level option[data-price-id="'+t+'"]').prop("selected",!0).addClass("give-default-level")}},__sendBackToForm:function(){var e=Give.fn.getParameterByName("form-id"),t=Give.fn.getParameterByName("payment-mode");if(!e||!t)return!1;var i=jQuery("body").find("#give-form-"+e+"-wrap"),n=i.find("form.give-form"),a=i.hasClass("give-display-modal"),r=i.hasClass("give-display-reveal");n.find("#give-gateway-radio-list label").removeClass("give-gateway-option-selected"),n.find("input[name=payment-mode][value="+t+"]").prop("checked",!0).parent().addClass("give-gateway-option-selected");var o=Give.fn.getParameterByName("level-id"),d=n.find('*[data-price-id="'+o+'"]');d.length>0&&update_multiselect_vals(d),a?give_open_form_modal(i,n):r&&(n.find(".give-btn-reveal").hide(),n.find("#give-payment-mode-select, #give_purchase_form_wrap").slideDown())},isValidDonationAmount:function(e){var t=this.getMinimumAmount(e),i=this.getAmount(e),n=this.getPriceID(e);return-1<i&&i>t||-1!==n},field:{formatCreditCard:function(e){e.each(function(e,t){t=jQuery(t);var i=t.find(".card-number"),n=t.find(".card-cvc"),a=t.find(".card-expiry");i.length&&(i.payment("formatCardNumber"),n.payment("formatCardCVC"),a.payment("formatCardExpiry"))})}}}},Give.notice={fn:{renderNotice:function(e,t){var i,n="";switch(t="undefined"!=typeof t?t:{},e){case"bad_minimum":i=jQuery('<div class="give_error give-invalid-minimum give-hidden">'+this.getNotice(e,t)+"</div>")}return t.length?void i.insertBefore(t.find(".give-total-wrap")).show():n},getNotice:function(e,t){if(!e.length)return null;var i="";switch(e){case"bad_minimum":t.length&&(i=Give.fn.getGlobalVar("bad_minimum")+" "+Give.fn.formatCurrency(Give.form.fn.getMinimumAmount(t),{symbol:Give.form.fn.getInfo("currency_symbol",t)},t))}return i}}},jQuery(function(e){function t(){var t=e(this),i=t.parents("form");if("card_state"!=t.attr("id")){i.find("#card_state").empty().append('<option value="1">'+give_global_vars.general_loading+"</option>").prop("disabled",!0);var n={action:"give_get_states",country:t.val(),field_name:"card_state"};e.ajax({type:"POST",data:n,url:give_global_vars.ajaxurl,xhrFields:{withCredentials:!0},success:function(e){var t="",n=e.states_label;t=void 0!=typeof e.states_found&&1==e.states_found?e.data:'<input type="text" id="card_state"  name="card_state" class="cart-state give-input required" placeholder="'+n+'" value="'+e.default_state+'"/>',!1===i.hasClass("float-labels-enabled")?"undefined"!=typeof e.states_require&&1==e.states_require?i.find('input[name="card_state"], select[name="card_state"]').closest("p").find("label .give-required-indicator").removeClass("give-hidden"):i.find('input[name="card_state"], select[name="card_state"]').closest("p").find("label .give-required-indicator").addClass("give-hidden"):i.find('input[name="card_state"], select[name="card_state"]').closest("p").find("label").text(n),i.find('input[name="card_state"], select[name="card_state"]').closest("p").find("label .state-label-text").text(n),i.find('input[name="card_state"], select[name="card_state"]').replaceWith(t),void 0!=typeof e.show_field&&1==e.show_field?(i.find("p#give-card-state-wrap").removeClass("give-hidden"),i.find("p#give-card-zip-wrap").addClass("form-row-last"),i.find("p#give-card-zip-wrap").removeClass("form-row-wide")):(i.find("p#give-card-state-wrap").addClass("give-hidden"),i.find("p#give-card-zip-wrap").addClass("form-row-wide"),i.find("p#give-card-zip-wrap").removeClass("form-row-last")),a.trigger("give_checkout_billing_address_updated",[e,i.attr("id")])}}).fail(function(e){window.console&&window.console.log&&console.log(e)})}return!1}function i(t){var i=t.parents("form"),n=t.val(),a=t.data("price-id");if("undefined"===a&&(a=t.find("option:selected").data("price-id")),"custom"===n)return i.find(".give-amount-top").val("").focus(),!1;i.find(".give-amount-top").val(n),i.find("span.give-amount-top").text(n);var r=Give.form.fn.getInfo("decimal_separator",i);e(".give-donation-amount .give-text-input",i).data("amount",Give.fn.unFormatCurrency(i.find(".give-final-total-amount").data("total"),r)),i.find(".give-donation-amount .give-text-input").trigger("blur",[i,n,a]),e(document).trigger("give_donation_value_updated",[i,n,a])}var n=jQuery("form.give-form"),a=e(document);e.fn.toggleError=function(e){return this.toggleClass("error",e),this.toggleClass("valid",!e),this},Give.form.init(),a.on("change","#give_cc_address input.card_state, #give_cc_address select",t),a.on("give_gateway_loaded",function(){Give.form.fn.field.formatCreditCard(n)}),a.on("submit","#give_payment_mode",function(){var t=Give.form.fn.getGateway(e(this).closest("form"));if(!t.length)return alert(Give.fn.getGlobalVar("no_gateway")),!1}),a.on("click","#give-payment-mode-select input",function(){var t,i=e(this).parents("form"),n=i.find("#give-payment-mode-select li"),a=i.find('li.give-gateway-option-selected input[name="payment-mode"]').val().trim();n.removeClass("give-gateway-option-selected"),n.prop("checked",!1),e(this).prop("checked",!0),e(this).parent().addClass("give-gateway-option-selected"),t=Give.form.fn.getGateway(i),i.attr("action",i.attr("action").replace("payment-mode="+a,"payment-mode="+t))}),a.on("focus",".give-donation-amount .give-text-input",function(t){var i=e(this).parents("form");e(this).removeClass("invalid-amount");var n=i.find(".give-final-total-amount").data("total"),a=Give.form.fn.getInfo("decimal_separator",i);e(this).data("amount",Give.fn.unFormatCurrency(n,a)),e(this).parent(".give-donation-amount").addClass("give-custom-amount-focus-in"),i.find(".give-default-level, .give-radio-input").removeClass("give-default-level"),i.find(".give-btn-level-custom").addClass("give-default-level"),i.find(".give-radio-input").prop("checked",!1),i.find(".give-radio-input.give-radio-level-custom").prop("checked",!0),i.find(".give-select-level").prop("selected",!1),i.find(".give-select-level .give-donation-level-custom").prop("selected",!0)}),a.on("blur",".give-donation-amount .give-text-input",function(t,i,n,a){var r="undefined"!=typeof i?i:e(this).closest("form"),o=e(this).data("amount"),d="undefined"!=typeof n?n:e(this).val(),s=Give.form.fn.getInfo("decimal_separator",r),l=Give.form.fn.getMinimumAmount(r),f=0===d?l:Give.fn.unFormatCurrency(d,s),u=Give.form.fn.formatAmount(f,r,{});if(a=Give.form.fn.getPriceID(r),e(this).val(u),Give.form.fn.isValidDonationAmount(r))e(this).removeClass("give-invalid-amount"),r.find(".give-invalid-minimum").slideUp(300,function(){e(this).remove()}),Give.form.fn.disable(r,!1);else{e(this).addClass("give-invalid-amount"),Give.form.fn.disable(r,!0);var c=r.find(".give-invalid-minimum");0===c.length&&Give.notice.fn.renderNotice("bad_minimum",r)}o!==f&&r.find(".give-final-total-amount").data("total",f).text(Give.fn.formatCurrency(f,{symbol:Give.form.fn.getInfo("currency_symbol",r),position:Give.form.fn.getInfo("currency_position",r)},r)),-1!==a&&(e('input[name="give-price-id"]',r).val(a),r.find(".give-amount-hidden").val(Give.form.fn.formatAmount(f,r,{})),r.find(".give-default-level").removeClass("give-default-level"),Give.form.fn.autoSelectDonationLevel(r)),e(this).parent(".give-donation-amount").removeClass("give-custom-amount-focus-in")}),a.on("click touchend",".give-donation-level-btn",function(t){t.preventDefault(),i(e(this))}),a.on("click touchend",".give-radio-input-level",function(t){i(e(this))}),a.on("change",".give-select-level",function(t){i(e(this))}),a.on("click",".give_terms_links",function(t){t.preventDefault();var i=e(this).closest("fieldset");return e("[class^=give_terms-]",i).slideToggle(),e("a.give_terms_links",i).toggle(),!1})}),jQuery(window).load(function(){jQuery("body").on("keyup change focusout",".give-form .card-number, .give-form .card-cvc, .give-form .card-expiry",function(e){var t=jQuery(this),i=t.parents("form.give-form"),n=t.attr("id"),a=i.find(".card-number"),r=i.find(".card-cvc"),o=i.find(".card-expiry"),d=jQuery.payment.cardType(a.val()),s=!1;switch(e.type){case"focusout":n.indexOf("card_number")>-1?(s=!jQuery.payment.validateCardNumber(a.val()),a.toggleError(s)):n.indexOf("card_cvc")>-1?(s=!jQuery.payment.validateCardCVC(r.val(),d),r.toggleError(s)):n.indexOf("card_expiry")>-1&&(s=!jQuery.payment.validateCardExpiry(o.payment("cardExpiryVal")),o.toggleError(s)),Give.form.fn.disable(t.parents("form"),s);break;default:if(t.hasClass("error")&&t.removeClass("error"),n.indexOf("card_number")>-1){var l=i.find(".card-type");null===d?(l.removeClass().addClass("off card-type"),t.removeClass("valid").addClass("error")):l.removeClass().addClass("card-type "+d)}else if(n.indexOf("card_expiry")>-1){var f=o.payment("cardExpiryVal");i.find(".card-expiry-month").val(f.month),i.find(".card-expiry-year").val(f.year)}}})});