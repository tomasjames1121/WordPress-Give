var give_scripts,give_global_vars;jQuery(document).ready(function(e){function a(e){var a=e.parents("form"),t=e;t.validateCreditCard(function(e){var i=a.find(".card-type");null==e.card_type?(i.removeClass().addClass("off card-type"),t.removeClass("valid"),t.addClass("error")):(i.removeClass("off"),i.addClass(e.card_type.name),e.length_valid&&e.luhn_valid?(t.addClass("valid"),t.removeClass("error")):(t.removeClass("valid"),t.addClass("error")))})}function t(a){e(".give-updating-price-loader").fadeIn().fadeOut(),e(a).parents(".give-donation-levels-wrap").find(".give-default-level").removeClass("give-default-level"),e(a).addClass("give-default-level");var t=e(a).val();e(a).parents("form").find("#give-amount").val(t),e(a).parents("form").find(".give-final-total-amount").data("total",t).text(t)}var i=e("body");i.on("change","#give_cc_address input.card_state, #give_cc_address select",function(){var a=e(this),t=a.parents("form");if("card_state"!=a.attr("id")){t.find("#card_state").empty().append('<option value="1">'+give_global_vars.general_loading+"</option>").prop("disabled",!0);var i={action:"give_get_shop_states",country:a.val(),field_name:"card_state"};e.ajax({type:"POST",data:i,url:give_global_vars.ajaxurl,xhrFields:{withCredentials:!0},success:function(a){if("nostates"==a){var i='<input type="text" name="card_state" class="cart-state give-input required" value=""/>';t.find('input[name="card_state"], select[name="card_state"]').replaceWith(i)}else t.find('input[name="card_state"], select[name="card_state"]').replaceWith(a);e("body").trigger("give_checkout_billing_address_updated",[a])}}).fail(function(e){window.console&&window.console.log&&console.log(e)})}return!1}),i.on("keyup change",".give-do-validate .card-number",function(){a(e(this))}),i.on("submit","#give_payment_mode",function(){var a=e("#give-gateway option:selected").val();return 0==a?(alert(give_global_vars.no_gateway),!1):void 0}),i.on("click","#give-payment-mode-select input",function(){e("#give-payment-mode-select label.give-gateway-option-selected").removeClass("give-gateway-option-selected"),e("#give-payment-mode-select input:checked").parent().addClass("give-gateway-option-selected")}),i.on("focus",".give-donation-amount .give-text-input",function(){e(this).data("amount",e(this).val()),e(this).parent(".give-donation-amount").addClass("give-custom-amount-focus-in")}),i.on("blur",".give-donation-amount .give-text-input",function(){var a=e(this).data("amount"),t=e(this).val();a!==t&&(e(this).parents("form").find(".give-final-total-amount").data("total",t).text(give_global_vars.currency_sign+t),e(this).next(".give-updating-price-loader").find(".give-loading-animation").css("background-image","url("+give_scripts.ajax_loader+")"),e(this).next(".give-updating-price-loader").fadeIn().fadeOut()),e(this).parent(".give-donation-amount").removeClass("give-custom-amount-focus-in")}),i.on("click touchend",".give-donation-level-btn",function(a){a.preventDefault(),t(e(this))}),i.on("click touchend",".give-radio-input-level",function(){t(e(this))}),i.on("change",".give-select-level",function(){t(e(this))})});