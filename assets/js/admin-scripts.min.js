jQuery.noConflict(),function(e){var t=function(){"use strict";var t=e("input.donation-level-radio"),i=e("#_give_donation_levels_repeat > .cmb-repeatable-grouping"),o=i.length;n(t),e("body").on("click","#_give_donation_levels_repeat button.cmb-add-group-row",function(){var t=e("input.donation-level-radio");n(t)}),e("body").on("cmb2_remove_row",function(){var t=e("input.donation-level-radio"),n=e("#_give_donation_levels_repeat > .cmb-repeatable-grouping");t.is(":checked")===!1&&n.first().find("input.donation-level-radio").prop("checked",!0)}),1===o&&(console.log("here"),t.prop("checked",!0))},n=function(e){e.on("change",function(){e.not(this).prop("checked",!1)})},i=function(){var t=e(".cmb2-id--give-price-option input:radio");t.on("change",function(){var t=e(".cmb2-id--give-price-option input:radio:checked").val();"set"===t?(e(".cmb2-id--give-set-price").show(),e(".cmb2-id--give-levels-header, .cmb2-id--give-levels-header + .cmb-repeat-group-wrap, .cmb2-id--give-display-style").hide()):(e(".cmb2-id--give-set-price").hide(),e(".cmb2-id--give-levels-header, .cmb2-id--give-levels-header + .cmb-repeat-group-wrap, .cmb2-id--give-display-style").show())}).change()},o=function(){if(e(".give_datepicker").length>0){var t="mm/dd/yy";e(".give_datepicker").datepicker({dateFormat:t})}},a=function(){e(".give-select-chosen").chosen({inherit_select_classes:!0,placeholder_text_single:give_vars.one_option,placeholder_text_multiple:give_vars.one_or_more_option}),e("#post").on("click",".give-thickbox",function(){e(".give-select-chosen","#choose-give-form").css("width","100%")})},c={init:function(){this.edit_address(),this.recalculate_total(),this.add_note(),this.remove_note(),this.resend_receipt()},edit_address:function(){e('select[name="give-payment-address[0][country]"]').change(function(){var t=e(this);return data={action:"give_get_shop_states",country:t.val(),field_name:"give-payment-address[0][state]"},e.post(ajaxurl,data,function(t){e("#give-order-address-state-wrap select, #give-order-address-state-wrap input").replaceWith("nostates"==t?'<input type="text" name="give-payment-address[0][state]" value="" class="give-edit-toggles medium-text"/>':t)}),!1})},recalculate_total:function(){e("#give-order-recalc-total").on("click",function(t){t.preventDefault();var n=0;e("#give-purchased-files .row .give-payment-details-download-amount").length&&e("#give-purchased-files .row .give-payment-details-download-amount").each(function(){n+=parseFloat(e(this).val())}),e(".give-payment-fees").length&&e(".give-payment-fees span.fee-amount").each(function(){n+=parseFloat(e(this).data("fee"))}),e("input[name=give-payment-total]").val(n)})},add_note:function(){e("#give-add-payment-note").on("click",function(t){t.preventDefault();var n={action:"give_insert_payment_note",payment_id:e(this).data("payment-id"),note:e("#give-payment-note").val()};if(n.note)e.ajax({type:"POST",data:n,url:ajaxurl,success:function(t){e("#give-payment-notes-inner").append(t),e(".give-no-payment-notes").hide(),e("#give-payment-note").val("")}}).fail(function(e){window.console&&window.console.log&&console.log(e)});else{var i=e("#give-payment-note").css("border-color");e("#give-payment-note").css("border-color","red"),setTimeout(function(){e("#give-payment-note").css("border-color",i)},500)}})},remove_note:function(){e("body").on("click",".give-delete-payment-note",function(t){if(t.preventDefault(),confirm(give_vars.delete_payment_note)){var n={action:"give_delete_payment_note",payment_id:e(this).data("payment-id"),note_id:e(this).data("note-id")};return e.ajax({type:"POST",data:n,url:ajaxurl,success:function(){return e("#give-payment-note-"+n.note_id).remove(),e(".give-payment-note").length||e(".give-no-payment-notes").show(),!1}}).fail(function(e){window.console&&window.console.log&&console.log(e)}),!0}})},resend_receipt:function(){e("body").on("click","#give-resend-receipt",function(){return confirm(give_vars.resend_receipt)})}};e(function(){t(),i(),o(),a(),c.init()})}(jQuery);