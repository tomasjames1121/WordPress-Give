jQuery.noConflict(),function(e){var t=function(){if(e(".give_datepicker").length>0){var t="mm/dd/yy";e(".give_datepicker").datepicker({dateFormat:t})}},n=function(){e(".give-select-chosen").chosen({inherit_select_classes:!0,placeholder_text_single:give_vars.one_option,placeholder_text_multiple:give_vars.one_or_more_option}),e("#post").on("click",".give-thickbox",function(){e(".give-select-chosen","#choose-give-form").css("width","100%")})},o={init:function(){this.edit_address(),this.recalculate_total(),this.add_note(),this.remove_note(),this.resend_receipt()},edit_address:function(){e('select[name="give-payment-address[0][country]"]').change(function(){var t=e(this);return data={action:"give_get_shop_states",country:t.val(),field_name:"give-payment-address[0][state]"},e.post(ajaxurl,data,function(t){e("#give-order-address-state-wrap select, #give-order-address-state-wrap input").replaceWith("nostates"==t?'<input type="text" name="give-payment-address[0][state]" value="" class="give-edit-toggles medium-text"/>':t)}),!1})},recalculate_total:function(){e("#give-order-recalc-total").on("click",function(t){t.preventDefault();var n=0;e("#give-purchased-files .row .give-payment-details-download-amount").length&&e("#give-purchased-files .row .give-payment-details-download-amount").each(function(){n+=parseFloat(e(this).val())}),e(".give-payment-fees").length&&e(".give-payment-fees span.fee-amount").each(function(){n+=parseFloat(e(this).data("fee"))}),e("input[name=give-payment-total]").val(n)})},add_note:function(){e("#give-add-payment-note").on("click",function(t){t.preventDefault();var n={action:"give_insert_payment_note",payment_id:e(this).data("payment-id"),note:e("#give-payment-note").val()};if(n.note)e.ajax({type:"POST",data:n,url:ajaxurl,success:function(t){e("#give-payment-notes-inner").append(t),e(".give-no-payment-notes").hide(),e("#give-payment-note").val("")}}).fail(function(e){window.console&&window.console.log&&console.log(e)});else{var o=e("#give-payment-note").css("border-color");e("#give-payment-note").css("border-color","red"),setTimeout(function(){e("#give-payment-note").css("border-color",o)},500)}})},remove_note:function(){e("body").on("click",".give-delete-payment-note",function(t){if(t.preventDefault(),confirm(give_vars.delete_payment_note)){var n={action:"give_delete_payment_note",payment_id:e(this).data("payment-id"),note_id:e(this).data("note-id")};return e.ajax({type:"POST",data:n,url:ajaxurl,success:function(){return e("#give-payment-note-"+n.note_id).remove(),e(".give-payment-note").length||e(".give-no-payment-notes").show(),!1}}).fail(function(e){window.console&&window.console.log&&console.log(e)}),!0}})},resend_receipt:function(){e("body").on("click","#give-resend-receipt",function(){return confirm(give_vars.resend_receipt)})}};e(function(){t(),n(),o.init()})}(jQuery);