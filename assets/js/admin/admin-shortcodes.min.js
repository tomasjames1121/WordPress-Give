var jq=jQuery.noConflict(),scShortcode,scForm={open:function(e){var t=tinymce.get(e);if(t){var o,c,n,s,i,r;n={action:"give_shortcode",shortcode:scShortcode},jq.post(ajaxurl,n,function(e){return 0===e.body.length?(window.send_to_editor("["+e.shortcode+"]"),void scForm.destroy()):void t.windowManager.open({title:e.title,body:e.body,buttons:[{text:e.ok,classes:"primary sc-primary",onclick:function(n){for(r=t.windowManager.getWindows()[0],s=scShortcodes[scShortcode],i=!0,c=s.length,o=0;c>o;o++)""===r.find("#"+s[o])[0].state.data.value&&(i=!1);i?r.submit():alert(e.alert)}},{text:e.close,onclick:"close"}],onsubmit:function(t){var o="";for(var c in t.data)t.data.hasOwnProperty(c)&&""!==t.data[c]&&(o+=" "+c+'="'+t.data[c]+'"');window.send_to_editor("["+e.shortcode+o+"]")},onclose:function(e){scForm.destroy()}})})}},destroy:function(){var e=jq("#scTemp");e.length&&(tinymce.get("scTemp").remove(),e.remove())}};jq(function(e){e(document).on("click",function(t){e(t.target).closest(".sc-wrap").length||(e(".sc-button").removeClass("active"),e(".sc-menu").hide())}),e(document).on("click","button.sc-button",function(t){t.preventDefault();var o=e(this),c=o.next(".sc-menu");o.toggleClass("active"),o.hasClass("active")?c.show():c.hide()}),e(document).on("click",".sc-shortcode",function(t){t.preventDefault(),scShortcode=e(this).attr("data-shortcode"),scShortcode?(tinymce.get(window.wpActiveEditor)?tinymce.execCommand("Give_Shortcode"):(e("#scTemp").length||(e("body").append('<textarea id="scTemp" style="display: none;" />'),tinymce.init({mode:"exact",elements:"scTemp",plugins:["give_shortcode","wplink"]})),setTimeout(function(){tinymce.execCommand("Give_Shortcode")},200)),setTimeout(function(){e(".sc-button").removeClass("active"),e(".sc-menu").hide()},100)):alert("No custom shortcodes have been registered!")})});