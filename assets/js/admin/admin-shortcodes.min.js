var jq=jQuery.noConflict(),giveForm={open:function(t){var e=tinymce.get(t);if(e){var n={action:"give_form_ajax"};jq.post(ajaxurl,n,function(t){e.windowManager.open({title:t.title,body:t.body,buttons:[{text:t.ok,classes:"primary give-primary",onclick:function(n){var o=e.windowManager.getWindows()[0];""===o.find("#id")[0].state.data.value?alert(t.alert):o.submit()}},{text:t.close,onclick:"close"}],onsubmit:function(e){var n="";for(var o in e.data)e.data.hasOwnProperty(o)&&""!==e.data[o]&&(n+=" "+o+'="'+e.data[o]+'"');window.send_to_editor("["+t.shortcode+n+"]")},onclose:function(t){var e=jq("#tmp_textarea");e.length&&(tinymce.get("tmp_textarea").remove(),e.remove())}})})}}};jq(function(t){t(document).on("click","button.give-shortcode-button",function(e){e.preventDefault(),tinymce.get(window.wpActiveEditor)?tinymce.execCommand("Give_Form"):(t("#tmp_textarea").length||(t("body").append('<textarea id="tmp_textarea" style="display: none;" />'),tinymce.init({mode:"exact",elements:"tmp_textarea",plugins:["give_form","wplink"]})),setTimeout(function(){tinymce.execCommand("Give_Form")},200))})});