var jq=jQuery.noConflict(),scShortcode,scForm={open:function(t){var e=tinymce.get(t);if(e){var o,n,c,s,i,r;c={action:"give_shortcode",shortcode:scShortcode},jq.post(ajaxurl,c,function(t){return 0===t.body.length?(window.send_to_editor("["+t.shortcode+"]"),void scForm.destroy()):void e.windowManager.open({title:t.title,body:t.body,minWidth:320,buttons:[{text:t.ok,classes:"primary sc-primary",onclick:function(){for(r=e.windowManager.getWindows()[0],s=scShortcodes[scShortcode],i=!0,n=s.length,o=0;n>o;o++)""===r.find("#"+s[o])[0].state.data.value&&(i=!1);i?r.submit():alert(t.alert)}},{text:t.close,onclick:"close"}],onsubmit:function(e){var o="";for(var n in e.data)e.data.hasOwnProperty(n)&&""!==e.data[n]&&(o+=" "+n+'="'+e.data[n]+'"');window.send_to_editor("["+t.shortcode+o+"]")},onclose:function(){scForm.destroy()}})})}},destroy:function(){var t=jq("#scTemp");t.length&&(tinymce.get("scTemp").remove(),t.remove())}};jq(function(t){var e=function(){t("#sc-button").addClass("active"),t("#sc-menu").show()},o=function(){t("#sc-button").removeClass("active"),t("#sc-menu").hide()};t(document).on("click",function(e){t(e.target).closest(".sc-wrap").length||o()}),t(document).on("click","#sc-button",function(n){n.preventDefault(),t(this).hasClass("active")?o():e()}),t(document).on("click",".sc-shortcode",function(e){e.preventDefault(),scShortcode=t(this).attr("data-shortcode"),scShortcode?(tinymce.get(window.wpActiveEditor)?tinymce.execCommand("Give_Shortcode"):(t("#scTemp").length||(t("body").append('<textarea id="scTemp" style="display: none;" />'),tinymce.init({mode:"exact",elements:"scTemp",plugins:["give_shortcode","wplink"]})),setTimeout(function(){tinymce.execCommand("Give_Shortcode")},200)),setTimeout(function(){o()},100)):alert("No custom shortcodes have been registered!")})});