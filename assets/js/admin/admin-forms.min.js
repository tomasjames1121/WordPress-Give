/*!
 * Give Admin Forms JS
 *
 * @description: The Give Admin Forms scripts. Only enqueued on the give_forms CPT; used to validate fields, show/hide, and other functions
 * @package:     Give
 * @subpackage:  Assets/JS
 * @copyright:   Copyright (c) 2015, WordImpress
 * @license:     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 */
jQuery.noConflict(),function(e){/**
	 * Misc Cleanup
	 *
	 * @description: Clean up and tweaks
	 * @since: 1.0
	 */
function i(){
//No Value = Placeholders: determine if value is 0.00 and remove if so in favor of placeholders
e(".cmb2-text-money").each(function(i,n){var o=parseInt(e(n).val());o||e(n).removeAttr("value")})}/**
	 * Default Radio Button
	 *
	 * @description: Allow only one radio button to be checked at a time
	 * @since: 1.0
	 */
var n=function(){"use strict";var i=e("input.donation-level-radio"),n=e("#_give_donation_levels_repeat > .cmb-repeatable-grouping"),o=n.length;e("body").on("change","input.donation-level-radio",function(){e("input.donation-level-radio").not(this).prop("checked",!1)}),
//If only one price then that one is default
1===o&&i.prop("checked",!0),
//When a row is removed containing the default selection then revert default to first repeatable row
e("body").on("cmb2_remove_row",function(i){var n=e("#_give_donation_levels_repeat > .cmb-repeatable-grouping");e("input.donation-level-radio").is(":checked")===!1&&n.first().find("input.donation-level-radio").prop("checked",!0)})},o=function(){
//Price Option
var i=e(".cmb2-id--give-price-option input:radio");i.on("change",function(){var i=e(".cmb2-id--give-price-option input:radio:checked").val();"set"===i?(
//set price shows
e(".cmb2-id--give-set-price, .cmb2-id--give-recurring").show(),
//if recurring conditional equals yes then show subsequent fields
"yes"==e("#_give_recurring").val()&&e(".cmb2-id--give-period, .cmb2-id--give-times").show(),e(".cmb2-id--give-levels-header, .cmb2-id--give-levels-header + .cmb-repeat-group-wrap, .cmb2-id--give-display-style").hide()):(
//multi-value shows
e(".cmb2-id--give-set-price, .cmb2-id--give-recurring, .cmb2-id--give-period, .cmb2-id--give-times").hide(),e(".cmb2-id--give-levels-header, .cmb2-id--give-levels-header + .cmb-repeat-group-wrap, .cmb2-id--give-display-style").show())}).change();
//Content Option
var n=e("#_give_content_option");n.on("change",function(){"none"!==n.val()?e(".cmb2-id--give-form-content").show():e(".cmb2-id--give-form-content").hide()}).change();
//Terms Option
var o=e("#_give_terms_option");o.on("change",function(){"none"!==o.val()?(e(".cmb2-id--give-agree-label").show(),e(".cmb2-id--give-agree-text").show()):(e(".cmb2-id--give-agree-label").hide(),e(".cmb2-id--give-agree-text").hide())}).change();
//Payment Display
var t=e("#_give_payment_display");t.on("change",function(){"onpage"===t.val()?e(".cmb2-id--give-reveal-label").hide():e(".cmb2-id--give-reveal-label").show()}).change();
//Custom Amount
var c=e(".cmb2-id--give-custom-amount input:radio");c.on("change",function(){var i=e(".cmb2-id--give-custom-amount input:radio:checked").val();"no"===i?e(".cmb2-id--give-custom-amount-text").hide():e(".cmb2-id--give-custom-amount-text").show()}).change();
//Goals
var a=e(".cmb2-id--give-goal-option");a.on("change",function(){var i=e(".cmb2-id--give-goal-option input:radio:checked").val();"no"===i?(e(".cmb2-id--give-set-goal").hide(),e(".cmb2-id--give-goal-color").hide()):(e(".cmb2-id--give-set-goal").show(),e(".cmb2-id--give-goal-color").show())}).change();
//Offline Donations
var d=e(".cmb2-id--give-customize-offline-donations input:radio");d.on("change",function(){var i=e(".cmb2-id--give-customize-offline-donations input:radio:checked").val();"no"===i?(e(".cmb2-id--give-offline-checkout-notes").hide(),e(".cmb2-id--give-offline-donation-enable-billing-fields-single").hide(),e(".cmb2-id--give-offline-donation-subject").hide(),e(".cmb2-id--give-offline-donation-email").hide()):(e(".cmb2-id--give-offline-checkout-notes").show(),e(".cmb2-id--give-offline-donation-enable-billing-fields-single").show(),e(".cmb2-id--give-offline-donation-subject").show(),e(".cmb2-id--give-offline-donation-email").show())}).change()},t=function(){/**
		 * Set Row IDs
		 *
		 * @description: Sets values in the Multi-level donation repeatable field
		 * @param row
		 */
function i(i){var o=n();
//Add row ID value to hidden field
e(i).find("input.give-level-id-input").val(o),
//Add row ID to displayed ID
e(i).find(".give-level-id").text(o)}/**
		 * Loops through Multi-level repeater rows
		 *
		 * @description: First counts the rows then it compares the row count with the largest iterator count.
		 *
		 * @returns {number}
		 */
function n(){var i=0,n=0,o=0;
//Loop through repeatable rows to see what highest ID is currently
return e("#_give_donation_levels_repeat > .cmb-repeatable-grouping").each(function(t,c){o=e(this).find("input.give-level-id-input").val(),o>n&&(n=o),i++}),"undefined"!=typeof n&&n>=i?parseInt(n)+1:i}
//Ensure for new posts that the repeater is filled
if(""===e(".give-level-id").text()){var o=e(".cmb-repeatable-grouping");
//loop through all repeatable rows and set vals
o.each(function(i,n){var o=e(n).data("iterator")+1;e(n).find(".give-level-id").text(o),e(n).find(".give-level-id-input").val(o)})}e("body").on("cmb2_add_row",function(e,n){i(n)}),e("body").on("cmb2_shift_rows_complete",function(i,n){var o=e(".cmb-repeatable-grouping");
//loop through all repeatable rows and set vals
o.each(function(i,n){var o=e(n).find("input.give-level-id-input").val();e(n).find(".give-level-id").text(o)})})};
//On DOM Ready
e(function(){n(),o(),t(),i()})}(jQuery);